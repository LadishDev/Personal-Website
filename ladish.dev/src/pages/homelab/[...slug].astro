---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import HomelabLayout from '../../layouts/HomelabLayout.astro';

// getStaticPaths: generate all /homelab/docs/[slug] routes
export async function getStaticPaths() {
  const docs = await getCollection('homelab');
  return docs.map((doc) => ({
    params: { slug: `docs/${doc.id}` }, // string, not array!
    props: doc,
  }));
}
type Props = CollectionEntry<'homelab'>;

const doc = Astro.props;
const { Content } = await render(doc);
---

<HomelabLayout {...doc.data}>
  <a href="/homelab/docs" class="inline-block mb-6 px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100 transition">
   Back to Homelab
  </a>
  <Content />
</HomelabLayout>