---
title: Docker & Compose
description: Container management, docker-compose stacks, and deployment strategies
status: pending
updated: 28 Oct 2025
link: #docker
category: services
tags: [docker, containers, compose, deployment]
---

## Overview

Docker is the foundation of my homelab's service deployment strategy. Most services are run as containers, making them portable, easy to update, and simple to roll back if needed.

## Installation

https://docs.docker.com/engine/install/

/// Guide for Debain | ADD Change OS version section tab later

```bash
# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update

# Install Latest Docker Package 
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

## Post-installation steps

In order to run docker commands without needing root you can create a docker group and add your users to it.

```bash
# Create docker group 
sudo groupadd docker

# Add user to docker group 
sudo usermod -aG docker $USER
```

## Creating docker containers

U can now create containers within docker using whatever containers u want online. However in order to test to ensure docker is working u can run.

```bash 
# Simple Container to test docker is running
docker run hello-world
```

# Ensure docker starts on boot 
```bash
# Enable docker on boot 
sudo systemctl enable docker.service
sudo systemctl enable containerd.service

# Disable docker on boot
sudo systemctl disable docker.service
sudo systemctl disable containerd.service
```

## Docker Compose

All services can be setup using docker compose. This allows you to create files called docker-compose.yml and list services within that u want to run and allows you to keep configs safe that can be easily modified and changed later.

One instance of a docker compose file format is this Nginx Proxy Manager container.
```yaml
services:
  nginx-proxy:
    image: 'jc21/nginx-proxy-manager:latest'
    restart: unless-stopped
    ports:
      - '80:80'
      - '81:81'
      - '443:443'
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
```

Once saved to the system with the correct name it can be pulled and created using the following.

```bash
docker compose up -d 
```

## Useful Commands

### Container Management
- `docker ps` - List running containers
- `docker logs [container]` - View container logs
- `docker exec -it [container] bash` - Access container shell

### Docker Compose
- `docker compose up -d` - Start services in detached mode
- `docker compose down` - Stop and remove containers
- `docker compose pull` - Pull latest images
- `docker compose restart` - Restart all services

## Best Practices

1. **Use docker-compose.yml** - Keep all configuration in version control
2. **Named volumes** - For persistent data that needs to survive container recreation
3. **Restart policies** - Set `restart: unless-stopped` for production services
4. **Health checks** - Implement health checks for critical services
5. **Resource limits** - Set memory and CPU limits to prevent resource exhaustion
